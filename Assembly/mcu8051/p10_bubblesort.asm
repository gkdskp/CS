; Perform bubble sort on 8-bit numbers

ORG 0000H

startaddr EQU 100H

MOV R0, #08H
MOV R1, #00H

MOV DPTR, #startaddr

DEC R0
MOV A, R0
MOV R1, A

OUTERLOOP:
	MOV A, R0
	MOV R2, A
	MOV DPTR, #startaddr
INNERLOOP:
	MOVX A, @DPTR
	MOV R3, A
	INC DPTR
	MOVX A, @DPTR
	SUBB A, R3
	JNC INNERLOOP_INCR

	MOVX A, @DPTR
	XCH A, R3
	MOVX @DPTR, A
	DEC DPL
	MOV A, R3
	MOVX @DPTR, A
INNERLOOP_INCR:
	DJNZ R2, INNERLOOP
OUTERLOOP_INCR:
	DJNZ R1, OUTERLOOP

EXIT:
	NOP
END